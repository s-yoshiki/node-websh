"use strict";var d=Object.create;var p=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var O=(e,s,t,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of S(s))!w.call(e,r)&&r!==t&&p(e,r,{get:()=>s[r],enumerable:!(o=v(s,r))||o.enumerable});return e};var n=(e,s,t)=>(t=e!=null?d(g(e)):{},O(s||!e||!e.__esModule?p(t,"default",{value:e,enumerable:!0}):t,e));var c=n(require("express")),m=n(require("http")),f=n(require("ws")),u=n(require("node-pty"));const a=(0,c.default)(),i=new m.default.Server(a);let l="dist/front";process.env.NODE_ENV==="development"&&(l=".cache/dist/front"),a.use("/",c.default.static(l));const N=new f.default.Server({server:i});N.on("connection",e=>{let s=u.spawn("bash",["--login"],{name:"xterm-color",cols:80,rows:24,cwd:process.env.HOME});s.onData(t=>{e.send(JSON.stringify({output:t}))}),e.on("message",t=>{console.log("received: %s",t);const o=JSON.parse(t.toString());o.input?s.write(o.input):o.resize&&s.resize(o.resize[0],o.resize[1])})}),i.listen(process.env.PORT||8999,()=>{console.log(`Server started on ${JSON.stringify(i.address())} :)`)});
